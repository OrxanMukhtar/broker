<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <section id="roi-calculator" class="roi-section">
  <div class="roi-container">
    <h2>ROI Calculator</h2>
    <form id="roi-form">
      <div class="input-group">
        <label>Property Price (AED)</label>
        <input type="text" id="property-price" required inputmode="numeric" pattern="[0-9,]*" placeholder="e.g. 1,000,000">
      </div>
      <div class="input-group">
        <label>Rental Income per Year (AED)</label>
        <input type="text" id="rental-income" required inputmode="numeric" pattern="[0-9,]*" placeholder="e.g. 60,000">
      </div>
      <div class="input-group">
        <label>Service Charge per Year (AED)</label>
        <input type="text" id="service-charge" required inputmode="numeric" pattern="[0-9,]*" placeholder="e.g. 5,000">
      </div>
      <div class="input-group">
        <label>Vacancy Rate (%) <span title="Annual percentage of vacancy time (e.g., time between tenants)">ðŸ›ˆ</span></label>
        <input type="number" id="vacancy-rate" value="5" min="0" max="100" step="0.1">
      </div>
      <div class="input-group">
        <label>Expected Annual Rental Increase (%)</label>
        <input type="number" id="rental-increase" min="0" max="100" step="0.1">
      </div>
      <div class="input-group" id="years-container" style="display:none">
        <label>Number of Years to Project</label>
        <input type="number" id="projection-years" min="1" max="50" step="1">
      </div>
      <button type="submit">Calculate</button>
    </form>

    <div id="roi-results" class="results"></div>
  </div>
</section>

<script>
  // Binlik ayÄ±rÄ±cÄ± ekleyen fonksiyon
  function formatNumber(n) {
    return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
  }
  // Nokta/virgÃ¼l temizleyen fonksiyon (inputtan)
  function cleanNumber(str) {
    return str.replace(/,/g, '');
  }

  // Inputlara otomatik binlik ayÄ±rÄ±cÄ± ekleme
  function addThousandSeparator(e) {
    const input = e.target;
    let caretPos = input.selectionStart;
    const originalLength = input.value.length;

    let clean = cleanNumber(input.value);
    if (isNaN(clean)) {
      clean = clean.replace(/[^\d]/g, '');
    }
    if (clean === '') {
      input.value = '';
      return;
    }

    input.value = formatNumber(clean);

    const newLength = input.value.length;
    caretPos += newLength - originalLength;
    input.setSelectionRange(caretPos, caretPos);
  }

  // Binlik ayÄ±rÄ±cÄ± olayÄ±nÄ± inputlara ekle
  ['property-price', 'rental-income', 'service-charge'].forEach(id => {
    const el = document.getElementById(id);
    el.addEventListener('input', addThousandSeparator);
  });

  document.getElementById("rental-increase").addEventListener("input", function () {
    const showYears = this.value !== "" && !isNaN(parseFloat(this.value));
    document.getElementById("years-container").style.display = showYears ? "block" : "none";
  });

  document.getElementById("roi-form").addEventListener("submit", function (event) {
    event.preventDefault();

    const price = parseFloat(cleanNumber(document.getElementById("property-price").value));
    const rent = parseFloat(cleanNumber(document.getElementById("rental-income").value));
    const charge = parseFloat(cleanNumber(document.getElementById("service-charge").value));
    const vacancyRate = parseFloat(document.getElementById("vacancy-rate").value || 0);
    const rentalIncrease = parseFloat(document.getElementById("rental-increase").value || 0);
    const projectionYears = parseInt(document.getElementById("projection-years").value || 0);

    if (isNaN(price) || isNaN(rent) || isNaN(charge) || price === 0) {
      alert("Please enter valid numbers for property price, rental income, and service charge.");
      return;
    }

    const netAnnualIncome = rent * (1 - (vacancyRate / 100)) - charge;
    const roi = (netAnnualIncome / price) * 100;

    let resultsHtml = `<p><strong>Net Annual Income:</strong> AED ${formatNumber(netAnnualIncome.toFixed(0))}</p>`;
    resultsHtml += `<p><strong>ROI:</strong> ${roi.toFixed(2)}%</p>`;

    if (rentalIncrease && projectionYears) {
      resultsHtml += `<h3>Projected Rental Income for Next ${projectionYears} Years:</h3>`;
      let currentIncome = rent;
      const year = new Date().getFullYear();
      resultsHtml += '<ul>';
      for (let i = 1; i <= projectionYears; i++) {
        currentIncome *= (1 + rentalIncrease / 100);
        let netIncome = currentIncome * (1 - (vacancyRate / 100)) - charge;
        resultsHtml += `<li>${year + i}: AED ${formatNumber(netIncome.toFixed(0))}</li>`;
      }
      resultsHtml += '</ul>';
    }

    document.getElementById("roi-results").innerHTML = resultsHtml;
  });
</script>

<style>
  .roi-section {
    background: #f7f7f7;
    padding: 40px 20px;
    font-family: Arial, sans-serif;
  }
  .roi-container {
    max-width: 600px;
    margin: 0 auto;
    background: #fff;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }
  .input-group {
    margin-bottom: 20px;
  }
  label {
    display: block;
    font-weight: bold;
    margin-bottom: 6px;
  }
  input {
    width: 100%;
    padding: 10px;
    font-size: 16px;
    border: 1px solid #ccc;
    border-radius: 6px;
  }
  button {
    background-color: #006ce4;
    color: white;
    padding: 12px 24px;
    font-size: 16px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }
  button:hover {
    background-color: #0053b3;
  }
  .results {
    margin-top: 30px;
    background: #e9f5ff;
    padding: 20px;
    border-radius: 8px;
  }
  .results p {
    font-size: 16px;
    margin-bottom: 12px;
  }
  .results ul {
    padding-left: 20px;
  }
</style>

    
</body>
</html>